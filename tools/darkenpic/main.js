const _0x4b0a21=_0x3dbc;function _0x3dbc(_0x2255f6,_0x4d4ca7){_0x2255f6=_0x2255f6-0x65;const _0x1ad064=_0x1ad0();let _0x3dbc79=_0x1ad064[_0x2255f6];return _0x3dbc79;}(function(_0xe0a8a1,_0x24f5a5){const _0x157711=_0x3dbc,_0x1fe29a=_0xe0a8a1();while(!![]){try{const _0x1b3464=parseInt(_0x157711(0x9c))/0x1*(-parseInt(_0x157711(0xb4))/0x2)+-parseInt(_0x157711(0x96))/0x3+parseInt(_0x157711(0xaf))/0x4*(-parseInt(_0x157711(0xae))/0x5)+parseInt(_0x157711(0x92))/0x6*(parseInt(_0x157711(0xa3))/0x7)+-parseInt(_0x157711(0xc6))/0x8*(parseInt(_0x157711(0x7f))/0x9)+parseInt(_0x157711(0x8c))/0xa+parseInt(_0x157711(0x93))/0xb;if(_0x1b3464===_0x24f5a5)break;else _0x1fe29a['push'](_0x1fe29a['shift']());}catch(_0x326aca){_0x1fe29a['push'](_0x1fe29a['shift']());}}}(_0x1ad0,0xacbcd));const fileInput=document['getElementById']('fileInput'),uploadArea=document['getElementById']('uploadArea'),previewImage=document[_0x4b0a21(0x90)](_0x4b0a21(0x8f)),overlay=document['getElementById'](_0x4b0a21(0x70)),opacitySlider=document[_0x4b0a21(0x90)](_0x4b0a21(0xb1)),opacityValue=document[_0x4b0a21(0x90)](_0x4b0a21(0xbb)),downloadBtn=document[_0x4b0a21(0x90)]('downloadBtn'),resetBtn=document[_0x4b0a21(0x90)]('resetBtn'),previewPlaceholder=document[_0x4b0a21(0x90)](_0x4b0a21(0x91)),fileInfo=document[_0x4b0a21(0x90)](_0x4b0a21(0xac)),fileName=document['getElementById'](_0x4b0a21(0x76)),fileFormat=document[_0x4b0a21(0x90)](_0x4b0a21(0x6f)),fileDimensions=document[_0x4b0a21(0x90)](_0x4b0a21(0xb9)),fileSize=document[_0x4b0a21(0x90)](_0x4b0a21(0xa9)),themeToggle=document[_0x4b0a21(0x90)]('themeToggle');let originalImage=null,originalImageUrl=null,imageFormat='',imageName='';function init(){const _0x5460fe=_0x4b0a21;uploadArea['addEventListener'](_0x5460fe(0x95),()=>fileInput[_0x5460fe(0x95)]()),['dragenter',_0x5460fe(0xbc),_0x5460fe(0x73),_0x5460fe(0xa4)][_0x5460fe(0x6c)](_0x5ca294=>{const _0xa0b6b6=_0x5460fe;uploadArea[_0xa0b6b6(0xc2)](_0x5ca294,_0x4f34f1,![]);});function _0x4f34f1(_0x5ee2c9){const _0x225dc0=_0x5460fe;_0x5ee2c9[_0x225dc0(0x8e)](),_0x5ee2c9[_0x225dc0(0x68)]();}['dragenter',_0x5460fe(0xbc)][_0x5460fe(0x6c)](_0x3fdd92=>{const _0x90aeef=_0x5460fe;uploadArea[_0x90aeef(0xc2)](_0x3fdd92,_0x488143,![]);}),['dragleave','drop'][_0x5460fe(0x6c)](_0xa3a90a=>{const _0x56b1af=_0x5460fe;uploadArea[_0x56b1af(0xc2)](_0xa3a90a,_0x1f33e3,![]);});function _0x488143(){const _0xe47e87=_0x5460fe;uploadArea['style'][_0xe47e87(0x72)]=_0xe47e87(0x78),uploadArea['style'][_0xe47e87(0x8b)]=_0xe47e87(0xb5);}function _0x1f33e3(){const _0x4da658=_0x5460fe;uploadArea[_0x4da658(0xbe)][_0x4da658(0x72)]=_0x4da658(0x8a),uploadArea['style'][_0x4da658(0x8b)]=_0x4da658(0x7b);}uploadArea[_0x5460fe(0xc2)](_0x5460fe(0xa4),_0x44a097,![]);function _0x44a097(_0x1944db){const _0xe330ab=_0x5460fe,_0x5bfac7=_0x1944db[_0xe330ab(0x9e)],_0x1c8d5e=_0x5bfac7[_0xe330ab(0xc5)];_0x1c8d5e[_0xe330ab(0xba)]&&(fileInput['files']=_0x1c8d5e,handleFileUpload(_0x1c8d5e[0x0]));}fileInput[_0x5460fe(0xc2)](_0x5460fe(0xa5),_0x534991=>{const _0x300307=_0x5460fe;_0x534991['target'][_0x300307(0xc5)]['length']&&handleFileUpload(_0x534991[_0x300307(0x84)][_0x300307(0xc5)][0x0]);}),opacitySlider[_0x5460fe(0xc2)](_0x5460fe(0xbf),updateOpacity),downloadBtn['addEventListener'](_0x5460fe(0x95),downloadProcessedImage),resetBtn[_0x5460fe(0xc2)](_0x5460fe(0x95),resetApp),themeToggle[_0x5460fe(0xc2)](_0x5460fe(0x95),toggleTheme),themeToggle[_0x5460fe(0xc2)](_0x5460fe(0x81),()=>{const _0x20769e=_0x5460fe,_0x3776a1=themeToggle['querySelector']('i');_0x3776a1['className']=themeToggle['classList'][_0x20769e(0x74)]('dark-mode')?'fas\x20fa-sun':_0x20769e(0xb8);}),themeToggle[_0x5460fe(0xc2)](_0x5460fe(0x7d),()=>{const _0x2289e8=_0x5460fe,_0x8e8266=themeToggle[_0x2289e8(0x77)]('i');_0x8e8266[_0x2289e8(0xbd)]=themeToggle[_0x2289e8(0xb0)]['contains'](_0x2289e8(0x9d))?_0x2289e8(0xb8):_0x2289e8(0xb6);}),updateOpacity();}function _0x1ad0(){const _0x373fbc=['backgroundColor','12534510URIpKz','block','preventDefault','previewImage','getElementById','previewPlaceholder','6INaVpm','18134908dayBRb','onload','click','698565WAiQxY','getContext','toLowerCase','toBlob','href','createElement','324524TsNIAi','dark-mode','dataTransfer','flex','drawImage','_darken','请选择有效的图片文件！','7121569viOegc','drop','change','image/gif','canvas','createObjectURL','fileSize','DOMContentLoaded','height','fileInfo','image/jpeg','11740CbwnYV','1208aSxGwl','classList','opacitySlider','textContent','globalAlpha','8JzZBBl','#e8f4fc','fas\x20fa-sun','split','fas\x20fa-moon','fileDimensions','length','opacityValue','dragover','className','style','input','\x20px','width','addEventListener','value','onerror','files','1688IoLDza','none','toggle','download','stopPropagation','toUpperCase','image/webp','src','forEach','name','图片加载失败，请重试。','fileFormat','overlay','body','borderColor','dragleave','contains','revokeObjectURL','fileName','querySelector','#2980b9','disabled','size','#f8fafc','fillRect','mouseleave','toFixed','41454qdcyhR','add','mouseenter','appendChild','fade-in','target','display','opacity','Bytes','type','pop','#3498db'];_0x1ad0=function(){return _0x373fbc;};return _0x1ad0();}function updateOpacity(){const _0x2f119b=_0x4b0a21,_0x3dcb7a=opacitySlider[_0x2f119b(0xc3)];opacityValue[_0x2f119b(0xb2)]=_0x3dcb7a+'%',overlay[_0x2f119b(0xbe)]['display']!=='none'&&(overlay['style'][_0x2f119b(0x86)]=_0x3dcb7a/0x64);}function handleFileUpload(_0x430955){const _0xf81475=_0x4b0a21;if(!_0x430955[_0xf81475(0x88)]['startsWith']('image/')){alert(_0xf81475(0xa2));return;}imageName=_0x430955[_0xf81475(0x6d)]['replace'](/\.[^/.]+$/,''),imageFormat=_0x430955[_0xf81475(0x6d)][_0xf81475(0xb7)]('.')[_0xf81475(0x89)]()[_0xf81475(0x98)](),fileName['textContent']=_0x430955[_0xf81475(0x6d)],fileFormat[_0xf81475(0xb2)]=imageFormat[_0xf81475(0x69)](),fileSize[_0xf81475(0xb2)]=formatFileSize(_0x430955[_0xf81475(0x7a)]),fileInfo[_0xf81475(0xbe)][_0xf81475(0x85)]=_0xf81475(0x8d),fileInfo[_0xf81475(0xb0)][_0xf81475(0x80)](_0xf81475(0x83));originalImageUrl&&URL[_0xf81475(0x75)](originalImageUrl);originalImageUrl=URL[_0xf81475(0xa8)](_0x430955);const _0x443722=new Image();_0x443722[_0xf81475(0x94)]=function(){const _0x1b9ab8=_0xf81475;originalImage=_0x443722,fileDimensions['textContent']=_0x443722[_0x1b9ab8(0xc1)]+'\x20×\x20'+_0x443722[_0x1b9ab8(0xab)]+_0x1b9ab8(0xc0),previewImage['src']=originalImageUrl,previewImage[_0x1b9ab8(0xbe)][_0x1b9ab8(0x85)]='block',previewPlaceholder[_0x1b9ab8(0xbe)][_0x1b9ab8(0x85)]=_0x1b9ab8(0x65),overlay[_0x1b9ab8(0xbe)][_0x1b9ab8(0x85)]='block',updateOpacity(),downloadBtn[_0x1b9ab8(0x79)]=![];},_0x443722[_0xf81475(0xc4)]=function(){const _0x1b4aa4=_0xf81475;alert(_0x1b4aa4(0x6e)),resetApp();},_0x443722[_0xf81475(0x6b)]=originalImageUrl;}function downloadProcessedImage(){const _0x17ba35=_0x4b0a21;if(!originalImage)return;const _0x5d6741=document[_0x17ba35(0x9b)](_0x17ba35(0xa7)),_0x35ef89=_0x5d6741[_0x17ba35(0x97)]('2d');_0x5d6741[_0x17ba35(0xc1)]=originalImage[_0x17ba35(0xc1)],_0x5d6741[_0x17ba35(0xab)]=originalImage['height'],_0x35ef89[_0x17ba35(0xa0)](originalImage,0x0,0x0),_0x35ef89[_0x17ba35(0xb3)]=opacitySlider['value']/0x64,_0x35ef89['fillStyle']='black',_0x35ef89[_0x17ba35(0x7c)](0x0,0x0,_0x5d6741[_0x17ba35(0xc1)],_0x5d6741[_0x17ba35(0xab)]);const _0x240e90={'jpg':_0x17ba35(0xad),'jpeg':_0x17ba35(0xad),'png':'image/png','gif':_0x17ba35(0xa6),'webp':_0x17ba35(0x6a)},_0xbd1307=_0x240e90[imageFormat]||_0x17ba35(0xad);_0x5d6741[_0x17ba35(0x99)](_0x4503fc=>{const _0x28d1fb=_0x17ba35,_0x18f5c1=URL[_0x28d1fb(0xa8)](_0x4503fc),_0x35a339=document['createElement']('a');_0x35a339[_0x28d1fb(0x9a)]=_0x18f5c1,_0x35a339[_0x28d1fb(0x67)]=imageName+_0x28d1fb(0xa1)+opacitySlider[_0x28d1fb(0xc3)]+'.'+imageFormat,document['body'][_0x28d1fb(0x82)](_0x35a339),_0x35a339[_0x28d1fb(0x95)](),document[_0x28d1fb(0x71)]['removeChild'](_0x35a339),setTimeout(()=>URL[_0x28d1fb(0x75)](_0x18f5c1),0x64);},_0xbd1307,0.95);}function resetApp(){const _0x5b8153=_0x4b0a21;previewImage['style'][_0x5b8153(0x85)]='none',overlay[_0x5b8153(0xbe)][_0x5b8153(0x85)]='none',previewPlaceholder[_0x5b8153(0xbe)][_0x5b8153(0x85)]=_0x5b8153(0x9f),fileInput[_0x5b8153(0xc3)]='',fileInfo[_0x5b8153(0xbe)][_0x5b8153(0x85)]=_0x5b8153(0x65),fileName[_0x5b8153(0xb2)]='-',fileFormat[_0x5b8153(0xb2)]='-',fileDimensions[_0x5b8153(0xb2)]='-',fileSize[_0x5b8153(0xb2)]='-',opacitySlider[_0x5b8153(0xc3)]=0x32,updateOpacity(),downloadBtn[_0x5b8153(0x79)]=!![],originalImageUrl&&(URL[_0x5b8153(0x75)](originalImageUrl),originalImageUrl=null),originalImage=null,imageFormat='',imageName='';}function formatFileSize(_0x316e9d){const _0x4e2267=_0x4b0a21;if(_0x316e9d===0x0)return'0\x20Bytes';const _0x58a0b4=[_0x4e2267(0x87),'KB','MB','GB'];let _0x2d68c7=_0x316e9d,_0x424d61=0x0;while(_0x2d68c7>=0x400&&_0x424d61<_0x58a0b4[_0x4e2267(0xba)]-0x1){_0x2d68c7/=0x400,_0x424d61++;}return _0x2d68c7[_0x4e2267(0x7e)](0x2)+'\x20'+_0x58a0b4[_0x424d61];}function toggleTheme(){const _0x50b0a5=_0x4b0a21;document['body'][_0x50b0a5(0xb0)][_0x50b0a5(0x66)](_0x50b0a5(0x9d));}document[_0x4b0a21(0xc2)](_0x4b0a21(0xaa),init);